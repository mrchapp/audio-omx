AC_PREREQ(2.52)

dnl initialize autoconf
AC_INIT([LCML], [1.0.0], [http://www.ti.com])

dnl define PACKAGE_VERSION_* variables
dnl AS_VERSION

dnl can autoconf find the source ?
AC_CONFIG_SRCDIR([src/LCML_DspCodec.c])

dnl set the autotools aux directory
AC_CONFIG_AUX_DIR([config])

dnl AM_MAINTAINER_MODE only provides the option to configure to enable it
AM_MAINTAINER_MODE

dnl sets host_*, target_ variables
AC_CANONICAL_SYSTEM

dnl initialize automake
AM_INIT_AUTOMAKE([foreign])

dnl find a compiler
AC_PROG_CC
AM_PROG_AS
AM_PROG_LIBTOOL

dnl *** autotools stuff ****    
dnl allow for different autotools
dnl AS_AUTOTOOLS_ALTERNATE

dnl *** checks for platform ***
AC_DEFINE_UNQUOTED(CPU_`echo $target_cpu | tr a-z- A-Z_`,[1])
AC_DEFINE_UNQUOTED(OS_` echo $target_os  | tr a-z- A-Z_`,[1])

dnl *** checks for programs ***
AC_PROG_INSTALL

dnl Check for pkgconfig first
AC_CHECK_PROG([HAVE_PKGCONFIG], [pkg-config], [yes], [no])

dnl *** checks for libraries ***
dnl Check for OMX Core:
PKG_CHECK_MODULES([OMXCORE], [libOMX_Core])

dnl Check for DSP Bridge:
PKG_CHECK_MODULES([DSPBRIDGE], [libdspbridge])

dnl Check for PERF (which is optional, so we'll specify ACTION-IF-FOUND and
dnl ACTION-IF-NOT-FOUND to override the default ACTION-IF-NOT-FOUND, which
dnl is fatal error):
PKG_CHECK_MODULES([PERF], [libPERF], [
	echo "PERF found, enabling PERF instrumentation"
	PERF_INSTRUMENTATION=-D__PERF_INSTRUMENTATION__=1
], [
	echo "PERF not found, disabling PERF instrumentation"
	PERF_INSTRUMENTATION=
])
AC_SUBST(PERF_INSTRUMENTATION)


dnl *** checks for header files ***
dnl check if we have ANSI C header files
AC_HEADER_STDC

dnl *** checks for types/defines ***

dnl *** checks for structures ***

dnl *** checks for compiler characteristics ***

dnl *** checks for library functions ***

dnl *** checks for dependancy libraries ***

dnl *** set variables based on configure arguments ***


AC_CONFIG_FILES([
libLCML.pc
Makefile
src/Makefile
])
AC_OUTPUT
